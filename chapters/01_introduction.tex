%!TEX root = ../thesis.tex

\chapter{Introduction}%
\label{introduction}

\section{Problem Statement}
\label{introduction:problem_statement}
Three-dimensional (3D) city models have evolved beyond mere visualisation tools to become fundamental components in diverse application domains.
As demonstrated by \citet{biljecki_2015}, these models now serve essential functions in urban planning, environmental simulation, emergency response, and numerous other fields, highlighting their critical role in urban environment representation and analysis.
The widespread adoption of these models is evidenced by significant national initiatives, such as the Netherlands' comprehensive 3D building database \citep{3dbag}, Japan's urban digital twin project \citep{plateau}, the US Open City Model \citep{us_buildings3d}, and Switzerland's SwissBUILDINGS3D \citep{swiss_buildings3d}.
To support this adoption, the CityGML Conceptual Model \citep{CityGML} provides a standardised framework for comprehensive urban environment representation, with implementations including CityGML \citep{CityGML}, CityJSON \citep{cityjson}, and 3DCityDB \citep{3dcitydb} achieving substantial adoption in both research and practical applications.

Concurrent with the growth of 3D city models, the geospatial industry has undergone a fundamental shift from desktop-based to cloud-native and web-based \ac{gis}.
Cloud-native \ac{gis}, as defined by \citet{nist_cloud_computing_2011}, leverages cloud computing infrastructure to deliver geospatial services over networks, enabling ubiquitous access to shared computing resources with minimal management overhead.
This paradigm shift offers substantial advantages including global accessibility, multi-user scalability, cross-platform compatibility, and support for diverse applications beyond traditional \ac{gis} workflows \citep{esri_webgis}.
Popular examples such as Google Maps Platform \citep{google_maps_platform} demonstrate how web-based geospatial services have become integral to modern applications, eliminating the need for users to download complete datasets to local machines.

However, this transition introduces specific technical challenges for 3D city model implementations.
Cloud-native \ac{gis} faces inherent constraints including network latency, bandwidth limitations, and the need to serve hundreds or thousands of concurrent users \citep{alesheikh_2002}.
Unlike desktop applications that benefit from high-speed local disk access, web-based systems must efficiently transfer data over networks, necessitating strategies such as data subsetting, streaming, and selective access patterns.
Traditional geospatial formats including GeoJSON, Shapefile, and WKT do not inherently support these cloud-optimised access patterns.
For example, the \ac{cjseq} format, which is a variant of CityJSON, is designed to enable streaming processing of 3D city model data, but it still inherits the performance limitations of text-based formats.

The transition towards cloud-native \ac{gis} introduces specific technical requirements for 3D city model implementations.
These requirements encompass scalable processing capabilities, efficient data transfer mechanisms, optimised query performance, and distributed access protocols \citep{cloud-optimised-formats}.
While CityGML and CityJSON provide comprehensive data models, their text-based implementations often result in slower processing times and increased memory consumption \citep{jordi_van_liempt_2020}. \ac{cjseq} was developed as a variant of CityJSON to enable streaming processing of 3D city model data, but it still inherits the performance limitations of text-based formats.
Furthermore, although cloud-optimised geospatial formats have emerged to address these challenges, they primarily focus on two-dimensional data, leaving a gap in efficient cloud-native solutions for 3D city models.
This gap necessitates the development of specialised data formats that can effectively operate within cloud computing environments while maintaining the semantic richness of 3D city models.

To address these challenges in the cloud-native environment, the geospatial community has developed several optimisation strategies including tiling and partitioning, spatial indexing, data simplification with level-of-detail systems, and binary encoding with compression.
These approaches, collectively referred to as \emph{cloud-optimised} geospatial formats \citep{cloud-optimised-formats}, enable on-demand access to geospatial data and have proven successful for 2D geospatial applications.
However, these optimisation techniques have not been comprehensively applied to 3D city model formats, creating a significant gap in cloud-native solutions for urban digital twin applications.

\section{Research Objectives}
\label{introduction:research_objectives}
This research investigates the application of efficient data serialisation formats for 3D city models, specifically examining the potential of FlatBuffers \citep{flatbuffers} as an encoding mechanism for \ac{cjseq}.

While CityJSONSeq (which will be explained in detail in \autoref{rw:cityjson_enhancements:cityjsonseq}) was designed to enable streaming processing of 3D city models, its text-based format results in suboptimal read performance and lacks efficient indexing strategies for feature querying.

The main research question is:
``How can the \ac{cjseq} encoding be optimised for faster access to features, lower memory consumption, and flexible feature querying in web environments?''

To answer this question, the following sub-questions are addressed:
\begin{itemize}
  \item What data schema of FlatBuffers is most suitable for encoding all components of \ac{cjseq}, including geometry templates, materials, extensions, attributes, and CityJSONFeature objects?
  \item How can feature querying with both spatial and attribute-based operations be achieved within logarithmic time complexity?
  \item How can subsets of data be retrieved efficiently over the web while maintaining simplicity of server architecture and handling high concurrent request loads that typically challenge traditional database-backed servers?
\end{itemize}

The following aspects, while relevant to the overall system performance, are not primary focus areas:
\begin{itemize}
  \item File size reduction, provided the client can efficiently fetch or partially retrieve required data
  \item Data update and deletion speed, as retrieval speed takes precedence
\end{itemize}

The resulting proposed data format, called FlatCityBuf, leverages FlatBuffers' exceptional read performance efficiency and random access capabilities, which are essential for fetching subsets of data without processing the entire fileâ€”these advantages will be explained in detail in \autoref{tb:flatbuffers}.
The proposed methodology combines FlatBuffers' efficient binary serialisation with \ac{http} Range Requests, enabling partial data retrieval over the web while facilitating serverless architectures for enhanced scalability.
The investigation aims to address the aforementioned cloud-native requirements while maintaining the semantic richness of CityJSON's data model.
Notably, the research prioritises read performance over update capabilities, as read operations predominate in typical use cases.
Furthermore, while file size optimisation remains relevant, it is considered secondary to query efficiency and partial data accessibility.
The technical implementation strategy and preliminary findings are detailed in \autoref{methodology}, while the evaluation of cloud-optimised formats is presented in \autoref{rw:cloud_optimised_formats}.

\section{Scope of the Research}
\label{introduction:scope_of_the_research}

Since the primary focus of the research is to explore the potential of FlatBuffers as an encoding mechanism for CityJSONSeq and achieve faster and flexible feature querying, the scope of the research is limited to the following:

\begin{itemize}
  \item Define the data specification of the proposed new encoding format, FlatCityBuf.
  \item Implement a Rust library for encoding and decoding operations for FlatCityBuf, with \ac{wasm} bindings for web-based decoding.
  \item Support spatial querying and attribute-based querying to achieve log-time complexity for feature retrieval.
  \item Demonstrate how the proposed encoding format can be used over the web with \ac{http} Range Requests.
  \item Evaluate the performance of the proposed encoding format compared to the other encoding formats.
\end{itemize}

On the other hand, the following aspects are considered secondary and are not within the scope of the research:
\begin{itemize}
  \item Implementing the library with other programming languages than Rust such as Python or JavaScript.
  \item Implementing the library to encode with other serialisation frameworks such as Parquet \citep{parquet} or Protocol Buffers \citep{protobuf}.
  \item Optimising the encoding format for write operations.
\end{itemize}

\section{Structure of the Thesis}
\label{introduction:structure_of_the_thesis}

This thesis is organised into the following chapters:

\textbf{\autoref{ch:theoretical_background}} establishes the fundamental knowledge of serialisation formats, algorithms, and indexing strategies necessary for understanding the proposed solution.

\textbf{\autoref{rw:related_work}} provides a review of the relevant literature, focusing on cloud-optimised geospatial formats and serialisation frameworks.
It presents a comprehensive analysis of existing cloud-optimised geospatial formats and their characteristics.

\textbf{\autoref{methodology}} details the methodology used to achieve the research objectives.

It explains the data specification of FlatCityBuf and other technical components designed to address the research questions.

\textbf{\autoref{chp:result}} presents the research findings, including file size comparisons, local benchmark results, and web-based performance evaluations.

\textbf{\autoref{chp:discussion}} elaborates on the results, discusses the implications of the research, and identifies potential applications and limitations.

\textbf{\autoref{chp:conclusion}} concludes the thesis by answering the research questions and summarising the contributions of the research.